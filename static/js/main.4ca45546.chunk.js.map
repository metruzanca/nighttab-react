{"version":3,"sources":["components/Modal/styles.ts","components/FileSelector/styles.ts","components/FileSelector/FileSelector.tsx","components/Modal/Modal.tsx","hooks/useOnClickOutside.ts","contexts/Editing.tsx","lib/persistance.ts","contexts/Config.tsx","components/Debug/Debug.tsx","components/Group/styles.ts","styles/icons.tsx","styles/theme.ts","components/Group/Group.tsx","components/Header/styles.ts","components/Header/components/Clock.tsx","components/Header/components/ColorAccent.tsx","components/Header/components/Date.tsx","components/Header/components/EditAdd.tsx","components/Header/components/Greeting.tsx","components/Header/components/Menu.tsx","components/Header/components/SearchBar.tsx","components/Header/components/Transitional.tsx","components/Header/components/index.tsx","components/Header/Header.tsx","components/LinkItem/styles.ts","components/LinkItem/LinkItem.tsx","components/Menu/styles.ts","components/Menu/Menu.tsx","app/styles.ts","app/index.tsx","lib/utils.tsx","index.tsx","hooks/useContructor.ts"],"names":["ModalPosition","Input","styled","input","FileSelector","onFileChanged","type","onChange","event","target","files","file","reader","FileReader","onload","result","error","readAsText","Container","div","p","position","center","css","left","right","modalPosition","Content","section","Shade","Modal","ref","handler","closeMenu","children","menu","useRef","useEffect","listener","current","contains","document","addEventListener","removeEventListener","EditingContext","createContext","editing","setEditing","Persistance","save","data","localStorage","setItem","JSON","stringify","console","load","instanceStr","getItem","parse","ConfigContext","config","Wrapper","Button","button","H1","DebugModal","useModals","text","useState","open","setOpen","Component","Debug","useContext","Modal1","setOpen1","Modal2","setOpen2","Modal3","setOpen3","setFile","onClick","style","display","justifyContent","json","handleInjectConfig","Header","Name","h1","Control","MoveUp","Drag","MoveDown","Edit","Delete","Body","Icons","icon","faPen","faTimes","LeftArrow","faChevronLeft","RightArrow","faChevronRight","UpArrow","faChevronUp","DownArrow","faChevronDown","faBars","theme","Group","items","name","openAll","show","map","itemProps","Fragment","uuid","props","Consumer","header","Clock","ColorAccent","Date","EditAdd","Greeting","Menu","SearchBar","Transitional","headerElements","Map","elements","order","components","ordered","forEach","item","comp","get","push","reorder","Front","a","Icon","DisplayName","Back","Url","MoveLeft","MoveRight","LinkItem","href","Layout","main","Background","Link","LinkArea","DefaultStyles","createGlobalStyle","App","log","bookmarks","state","groupProps","Compose","reduceRight","acc","Comp","ReactDOM","render","StrictMode","persist","instance","callback","firstExecution","useConstructor","nighttab","Provider","value","getElementById"],"mappings":"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","file":"static/js/main.4ca45546.chunk.js","sourcesContent":["import styled, { css } from \"styled-components\";\n\nexport enum ModalPosition {\n  \"left\", \"right\", \"center\"\n}\n\nexport type ModalStyleProps = {\n  position?: ModalPosition\n} \n\nfunction modalPosition(position?: ModalPosition){\n  switch (position) {\n    default:\n    case ModalPosition.center: return css`\n      justify-content: center;\n    `\n    case ModalPosition.left: return css`\n      justify-content: flex-start;\n    `\n    case ModalPosition.right: return css`\n      justify-content: flex-end;\n    `\n  }\n}\n\n/*\n  @ZombieFox\n  The idea is that with fixed we can absolutely position\n  this element regardles of how deeply nested it is without\n  having to add some really Jank styles to the parents.\n*/\nexport const Container = styled.div<ModalStyleProps>`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n\n  display: flex;\n  ${p => modalPosition(p.position)}\n  align-items: center;\n`\n\nexport const Content = styled.section`\n  z-index: 11;\n`\n\nexport const Shade = styled.div`\n  background-color: rgba(78, 78, 214, .3);\n  position: fixed;\n  top: -1em;\n  left: -1em;\n  width: 101vw;\n  height: 1001vh;\n  /* transition: opacity var(--layout-transition-extra-fast),background-color var(--layout-transition-extra-fast); */\n  z-index: 10;\n  /* TODO use cssvar here */\n  /* z-index: var(--z-index-shade); */\n`","import styled from \"styled-components\";\n\nexport const Input = styled.input`\n  color: red;\n`","import React from \"react\"\nimport { Input } from \"./styles\"\n\nexport interface FileEvent {\n  file?: string\n  error?: string\n}\n\ntype Props = {\n  onFileChanged: (event: FileEvent) => void\n}\n\nexport const FileSelector: React.FC<Props> = ({onFileChanged}) => {\n\n  function onChange(event: React.ChangeEvent<HTMLInputElement>) {\n    if(event?.target?.files){\n      const file = event?.target?.files[0]\n      const reader = new FileReader()\n      reader.onload = (event) => {\n        if(typeof event?.target?.result === \"string\"){\n          onFileChanged({file: event?.target?.result})\n        } else {\n          onFileChanged({error: \"Invalid file format\"})\n        }\n      }  \n      reader.readAsText(file)\n    }\n  }\n\n  return (\n    <Input type={\"file\"} onChange={onChange}/>\n  )\n}","import { useOnClickOutside } from \"hooks/useOnClickOutside\"\nimport React, { useRef } from \"react\"\nimport { Shade, ModalStyleProps, Container, Content } from \"./styles\"\n\n\n\ninterface Props extends ModalStyleProps{\n  closeMenu: () => void\n}\n\n/** Size of the Modal is determined by its content. */\nexport const Modal: React.FC<Props> = ({\n  closeMenu,\n  position,\n  children,\n}) => {\n  const menu = useRef<HTMLElement>(null)\n  useOnClickOutside(menu, closeMenu)\n\n  return (\n    <Container position={position}>\n      <Content ref={menu}>\n        {children}\n      </Content>\n      <Shade/>\n    </Container>\n  )\n}","// https://usehooks.com/useOnClickOutside/\n\nimport { useEffect } from \"react\";\n\nexport const useOnClickOutside = (ref: React.RefObject<any>, handler:(e:Event)=>void) => {\n  useEffect(\n    () => {\n      const listener = (event: Event) => {\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target)) {\n          return;\n        }\n\n        handler(event);\n      };\n\n      document.addEventListener('mousedown', listener);\n      document.addEventListener('touchstart', listener);\n\n      return () => {\n        document.removeEventListener('mousedown', listener);\n        document.removeEventListener('touchstart', listener);\n      };\n    },\n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, handler],\n  );\n};","import { createContext, useState } from \"react\";\n\ninterface EditingContextProps {\n  editing: boolean\n  setEditing: (editing:boolean) => void\n}\n\nexport const EditingContext = createContext<EditingContextProps>({\n  editing: false,\n  setEditing: () => {}\n})\nexport const EditingProvider: React.FC = ({children}) => {\n  const [editing, setEditing] = useState(false)\n\n  return (\n    <EditingContext.Provider value={{editing, setEditing}}>\n      {children}\n    </EditingContext.Provider>\n  )\n}\n\nexport interface Editable {\n  editing: boolean\n}\n\nexport function withEditing<T extends object>(Component:React.FC<T>) {\n  const EditableComponent:React.FC<T & Editable> = (props) =>  (\n    <EditingContext.Consumer>\n      {({editing}) => <Component editing={editing} {...props as T}/>}\n    </EditingContext.Consumer>\n  )\n  return EditableComponent\n}","import { Instance } from \"types\"\n\n// TODO give this a better name\ntype PersistanceType =| \"localstorage\" | \"selfhosted\" | \"nighttab-servers\"\n\nexport interface Persistance {\n  save: (data: object) => void\n  load: () => Instance\n}\n\n// Kind of like Dependency Injection, but more \"Dependency Selection\".\n// This probably needs to be changed to be more flexible\n// This feels like a codesmell but idk how to achieve DI in js in a way\n// to not require rebuilding the app to change the Persistance object\n// It might be that we'll need a persistance.js file to be in as-is in the final bundle\n// and provide a series of persistance.js files that can be swapped in.\n// This might get messy.\nexport function Persistance(type:PersistanceType): Persistance{\n  switch(type){\n    default:\n    case \"localstorage\": return {\n      save: (data) => {\n        try {\n          localStorage.setItem(\"nighttab\", JSON.stringify(data))\n        } catch (error) {\n          console.error(error)\n          // handle telling user maybe? Or try again? This shouldn't ever fail...\n          //...unless their config is bigger than 5MB (5000000 chars)\n        }\n      },\n      //@ts-ignore //TODO need to make load return a valid instance\n      load: () => {\n        const instanceStr = localStorage.getItem(\"nighttab\")\n        if (instanceStr) {\n          // TODO potentially trycatch parsing for \"corrupted\" config\n          return <Instance>JSON.parse(instanceStr)\n        } else {\n          // TODO handle creating new default config\n        }\n      },\n    }\n    // Communicates with our servers, once we get ssr working.\n    case \"nighttab-servers\": return {\n      save: (data) => {\n        \n      },\n      //@ts-ignore //TODO need to make load return a valid instance\n      load: () => {\n\n      },\n    }\n    // Make this communicate with a specific API thats well documented.\n    case \"selfhosted\": return {\n      save: (data) => {\n        \n      },\n      //@ts-ignore //TODO need to make load return a valid instance\n      load: () => {\n\n      },\n    }\n  }\n}","import { useConstructor } from \"hooks\";\nimport { Persistance } from \"lib\";\nimport { createContext, useRef } from \"react\";\nimport { Instance } from \"types\";\n\n\ninterface ConfigContext {\n  config: Instance\n  save: (data:object) => void\n}\n\nexport const ConfigContext = createContext<ConfigContext>({\n  // @ts-ignore This temporary value doesn't exist long enough\n  // to justify making load have a valid value\n  config: {/* Valid instance goes here*/},\n  save: () => {}\n})\nexport const ConfigProvider: React.FC = ({children}) => {\n  // NB: Both Persistance, useConstructor are syncronous and the value is stored in a ref\n  //     resulting this logic only excuting on app load. \n  const persist = Persistance(\"localstorage\")\n  const instance = useRef<Instance>()\n  useConstructor(() => {\n    const nighttab = persist.load()\n    instance.current = nighttab\n  })\n\n  if(!instance){\n    // TODO uncomment once new Instance() is working\n    // instance.current = new Instance()\n    // This path shouldn't even be necessary as load's job is to load\n    // or create a new Instance if one is not found\n  }\n\n  return (\n    <ConfigContext.Provider value={{\n      //@ts-ignore //TODO Remove this ignore once creating a new nighttab instance has been done\n      config: instance.current,\n      save: persist.save,\n    }}>\n      {children}\n    </ConfigContext.Provider>\n  )\n}","import { FileEvent, FileSelector } from \"components/FileSelector\"\nimport { Modal } from \"components/Modal\"\nimport { ModalPosition } from \"components/Modal/styles\"\nimport { EditingContext } from \"contexts\"\nimport { Persistance } from \"lib\"\nimport React, { useContext, useState } from \"react\"\nimport styled from \"styled-components\"\n\ntype Props = {}\n\nconst Wrapper = styled.div`\n  background-color: #302929;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: .5em;\n  display: flex;\n  flex-direction: column;\n  z-index: 1000;\n`\n\nconst Button = styled.button`\n  background-color: #000000;\n  color: red;\n  padding: .5em;\n  margin: .4em 0;\n  border-radius: .5em;\n  &:hover{\n    background-color: #1f1f1f;\n  }\n  cursor: pointer;\n`\n\nconst H1 = styled.div`\n  background-color: #302929;\n  color: red;\n  margin-bottom: .5em;\n`\n\nconst DebugModal = styled.div`\n  height: 500px;\n  width: 500px;\n  background: lime;\n`\n\n// Don't export this. I made this to make this file less spaghetti\nfunction useModals(position: ModalPosition , text = \"MODAL\"){\n  const [open, setOpen] = useState(false)\n\n  return {\n    Modal: (\n      <>\n        {open && (\n          <Modal position={position} closeMenu={() => setOpen(false)}>\n            <DebugModal>\n              {text}\n            </DebugModal>\n          </Modal>\n        )}\n      </>\n    ),\n    setOpen: () => setOpen(true),\n  }\n}\n\nexport const Debug: React.FC<Props> = ({}) => {\n  const {setEditing, editing} = useContext(EditingContext)\n  const handleToggleEdit =  () => setEditing(!editing)\n  \n  const {Modal: Modal1, setOpen: setOpen1} = useModals(ModalPosition.left, \"Nothing really\")\n  const {Modal: Modal2, setOpen: setOpen2} = useModals(ModalPosition.center, \"Add bookmark/group\")\n  const {Modal: Modal3, setOpen: setOpen3} = useModals(ModalPosition.right, \"Settings\")\n\n  const [file, setFile] = useState<string|null>(null)\n  function handleFileChanged(event:FileEvent) {\n    if(event.error){\n      // TODO handle error\n    }\n    event?.file && setFile(event.file)\n  }\n\n  const handleInjectConfig = (file:string) => {\n    const json = JSON.parse(file)    \n    Persistance(\"localstorage\").save(json)\n  }\n\n  return (\n    <Wrapper>\n      <H1>Debug Tools</H1>\n      <Button onClick={handleToggleEdit}>\n        Toggle Edit Mode\n      </Button>\n      <div style={{display: \"flex\", justifyContent:\"space-around\"}}>\n      <Button onClick={setOpen1}>\n        Modal Left\n      </Button>\n      <Button onClick={setOpen2}>\n        Modal Center\n      </Button>\n      <Button onClick={setOpen3}>\n        Modal Right\n      </Button>\n      </div>\n      <div>\n        <FileSelector onFileChanged={handleFileChanged}/>\n        <Button onClick={() => file && handleInjectConfig(file)}>\n          Inject Uploaded Config\n        </Button>\n      </div>\n      {Modal1}\n      {Modal2}\n      {Modal3}\n    </Wrapper>\n  )\n}","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nexport const Header = styled.div`\n  display: flex;\n`\n\nexport const Name = styled.h1`\n  \n`\n\nexport const Control = styled.div`\n  background-color:red;\n  & > * {\n    background-color: white;\n    height:50px;\n    width: 50px;\n    &:hover {\n      background-color: blue;\n    }\n  }  \n`\n\nexport const MoveUp = styled.button`\n  \n`\n\nexport const Drag = styled.div`\n  display: inline-block;\n`\n\nexport const MoveDown = styled.button`\n  \n`\n\nexport const Edit = styled.button`\n  \n`\n\nexport const Delete = styled.button`\n  \n`\n\nexport const Body = styled.div`\n  display: grid;\n`","import React from \"react\";\nimport { faBars, faChevronDown, faChevronLeft, faChevronRight, faChevronUp, faPen, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\n// Why does this file exist?\n// To make sure when e.g. editing, the same pencil is used everywhere.\n\nexport const Icons = {\n  // Edit mode\n  Edit: <FontAwesomeIcon icon={faPen}/>,\n  // TODO I think this faTimes is the wrong one\n  Delete: <FontAwesomeIcon icon={faTimes}/>,\n  LeftArrow: <FontAwesomeIcon icon={faChevronLeft}/>,\n  RightArrow: <FontAwesomeIcon icon={faChevronRight}/>,\n  UpArrow: <FontAwesomeIcon icon={faChevronUp}/>,\n  DownArrow: <FontAwesomeIcon icon={faChevronDown}/>,\n  Drag: <FontAwesomeIcon icon={faBars}/>,\n  // \n}","export const theme = {\n  borderRadius: \".25em\",\n  linkItemWidth: \"11em\",\n  linkItemHeight: \"10em\",\n  rootFontSize: \"16px\",\n}\n\n// function createSheet(data){\n//   return Object.entries(data)\n//     .map(([k,v]) => `--${k}: ${v};\\n`)\n//     .join(\"\")\n// }\n\n// function cssVar(key: keyof typeof flat){\n//   return `var(--${key})`\n// }","import React from \"react\"\nimport { v4 as uuid } from 'uuid';\n\nimport {BookmarkGroup} from 'types'\nimport { LinkItem } from \"components\"\n\nimport {\n  Body,\n  Control,\n  Header,\n  Name,\n  Wrapper,\n  MoveUp,\n  Drag,\n  MoveDown,\n  Edit,\n  Delete,\n} from \"./styles\"\nimport { withEditing, Editable } from \"contexts\";\nimport { Icons } from \"styles\";\n\ninterface Props extends BookmarkGroup, Editable {}\n\nexport const Group = withEditing<Props>(({\n  items,\n  name,\n  openAll,\n  editing,\n}) => {\n\n  return (\n    <Wrapper>\n      <Header>\n        {editing && (\n          <Control>\n            <MoveUp>\n              {Icons.UpArrow}\n            </MoveUp>\n            <Drag>\n              {Icons.Drag}\n            </Drag>\n            <MoveDown>\n              {Icons.DownArrow}\n            </MoveDown>\n            <Edit>\n              {Icons.Edit}\n            </Edit>\n            <Delete>\n              {Icons.Delete}\n            </Delete>\n          </Control>\n        )}\n        {/* @zombiefox, this is a great example of where we can do things directly\n            via react instead of using name.show to set a display: none\n        */}\n        {name.show && <Name>{name.text}</Name>}\n      </Header>\n      <Body>\n        {items.map(itemProps => \n          <React.Fragment key={uuid()}>\n            <LinkItem editing={editing} key={uuid()} {...itemProps}/>\n          </React.Fragment>\n        )}\n      </Body>\n    </Wrapper>\n  )\n})","import styled from \"styled-components\";\n\nexport const Wrapper = styled.header`\n  display: flex;\n  color: red;\n  & > * {\n    margin-right: .5em;\n  }\n`","import React from \"react\"\n\ntype Props = {}\n\nexport const Clock: React.FC<Props> = ({}) => {\n\n  return (\n    <div>Clock</div>\n  )\n}","import React from \"react\"\n\ntype Props = {}\n\nexport const ColorAccent: React.FC<Props> = ({}) => {\n\n  return (\n    <div>ColorAccent</div>\n  )\n}","import React from \"react\"\n\ntype Props = {}\n\nexport const Date: React.FC<Props> = ({}) => {\n\n  return (\n    <div>Date</div>\n  )\n}","import React from \"react\"\n\ntype Props = {}\n\nexport const EditAdd: React.FC<Props> = ({}) => {\n\n  return (\n    <div>EditAdd</div>\n  )\n}","import React from \"react\"\n\ntype Props = {}\n\nexport const Greeting: React.FC<Props> = ({}) => {\n\n  return (\n    <div>Greeting</div>\n  )\n}","import React from \"react\"\n\ntype Props = {}\n\nexport const Menu: React.FC<Props> = ({}) => {\n\n  return (\n    <div>Menu</div>\n  )\n}","import React from \"react\"\n\ntype Props = {}\n\nexport const SearchBar: React.FC<Props> = ({}) => {\n\n  return (\n    <div>SearchBar</div>\n  )\n}","import React from \"react\"\n\ntype Props = {}\n\nexport const Transitional: React.FC<Props> = ({}) => {\n\n  return (\n    <div>Transitional</div>\n  )\n}","import {Clock} from './Clock'\nimport {ColorAccent} from './ColorAccent'\nimport {Date} from './Date'\nimport {EditAdd} from './EditAdd'\nimport {Greeting} from './Greeting'\nimport {Menu} from './Menu'\nimport {SearchBar} from './SearchBar'\nimport {Transitional} from './Transitional'\n\n// If you add something to this list, put it in alphabetical order\nexport const headerElements = new Map<string, React.ReactNode>([\n  [\"clock\", <Clock/>],\n  [\"coloraccent\", <ColorAccent/>],\n  [\"date\", <Date/>],\n  [\"editadd\", <EditAdd/>],\n  [\"greeting\", <Greeting/>],\n  [\"menu\", <Menu/>],\n  [\"searchbar\", <SearchBar/>],\n  [\"transitional\", <Transitional/>],\n])","import React from \"react\"\nimport { Wrapper } from \"./styles\"\n\nimport { Header as HeaderType } from \"types\"\nimport { headerElements } from \"./components\"\n\ninterface Props {\n  config: HeaderType\n}\n\nexport const Header: React.FC<Props> = ({\n  config: { order }\n}) => {\n\n  const elements = reorder(order, headerElements)\n\n  return (\n    <Wrapper>\n      {elements}\n    </Wrapper>\n  )\n}\n\nfunction reorder(order:string[], components:Map<string, React.ReactNode>){\n  const ordered:React.ReactNode[] = []\n  order.forEach(item => {\n    const comp = components.get(item)\n    ordered.push(comp)\n  })\n  return ordered\n}","import styled from \"styled-components\";\nimport { theme } from \"styles\";\n\nexport const Wrapper = styled.div`\n  background-color: #413d69;\n  color: white;\n  & > a:visited {\n    color: lightblue;\n  }\n  /* Width and height wasn't defined here in the original, as it was using grid.\n  I placed this here for initial development. Should be removed later */\n  width: ${theme.linkItemWidth};\n  height: ${theme.linkItemHeight};\n\n  &:hover {\n    transform: scale(1.05);\n  }\n\n  margin: 1em;\n`\n\nexport const Front = styled.a`\n\n`\n\nexport const Icon = styled.a`\n\n`\n\nexport const DisplayName = styled.p`\n\n`\n\nexport const Back = styled.div`\n\n`\n\nexport const Url = styled.div`\n\n`\n\nexport type ControlProps = {\n  editing: boolean\n}\n\nexport const Control = styled.div<ControlProps>`\n  display: ${p => p.editing ? \"flex\" : \"none\"};\n  flex-wrap: wrap;\n`\n\nexport const Drag = styled.div`\n  flex-grow: 1;\n`\n\nexport const MoveLeft = styled.button`\n  flex-basis: 30%;\n  height: 30px;\n\n`\n\nexport const MoveRight = styled.button`\n  flex-basis: 30%;\n  height: 30px;\n\n`\n\n\nexport const Edit = styled.button`\n  height: 30px;\n  width: 50%;\n  border-bottom-left-radius: ${theme.borderRadius};\n`\n\nexport const Delete = styled.button`\n  height: 30px;\n  width: 50%;\n  border-bottom-right-radius: ${theme.borderRadius};\n`","import React from \"react\"\nimport { Icons } from \"styles\"\nimport {\n  Back,\n  Control,\n  Delete,\n  DisplayName,\n  Drag,\n  Edit,\n  Front,\n  Icon,\n  MoveLeft,\n  MoveRight,\n  Url,\n  Wrapper,\n} from \"./styles\"\n\ntype Props = {\n  editing: boolean\n}\n\nexport const LinkItem: React.FC<Props> = ({\n  editing = false,\n}) => {\n\n  return (\n    <Wrapper>\n      <Front href=\"\">\n        <div>\n          <Icon></Icon>\n          <DisplayName></DisplayName>\n        </div>\n      </Front>\n      <Back>\n        <Url>\n          <p></p>\n        </Url>\n        <Control editing={editing}>\n          <MoveLeft>\n            {Icons.LeftArrow}\n          </MoveLeft>\n          <Drag>\n            {Icons.Drag}\n          </Drag>\n          <MoveRight>\n            {Icons.RightArrow}\n          </MoveRight>\n          <Edit>\n            {Icons.Edit}\n          </Edit>\n          <Delete>\n            {Icons.Delete}\n          </Delete>\n        </Control>\n      </Back>\n    </Wrapper>\n  )\n}","import styled from \"styled-components\";\n\nexport const Wrapper = styled.section`\n  border: 5px solid red;\n  height: 500px;\n  width: 500px;\n  background: gray;\n`","import React from \"react\"\nimport { Wrapper } from \"./styles\"\n\ntype Props = {\n}\n\nexport const Menu: React.FC<Props> = ({\n}) => {\n\n  return (\n    <Wrapper>\n      <h1>A REALLY UGLY MENU</h1>\n      <p>Content and stuff</p>\n    </Wrapper>\n  )\n}","import styled from \"styled-components\";\n\nexport const Layout = styled.main`\n\n`\n\nexport const Background = styled.div`\n\n`\n\nexport const Link = styled.section`\n\n`\n\nexport const LinkArea = styled.div`\n\n`","import React, { useContext, useCallback, useState } from 'react';\nimport { createGlobalStyle } from 'styled-components';\nimport { v4 as uuid } from 'uuid';\n\nimport { Debug, Group, Header, Menu } from 'components';\nimport { ConfigContext, EditingContext } from 'contexts';\nimport { theme } from 'styles';\n\nimport { Background, Layout, Link, LinkArea } from './styles';\nimport { Modal } from 'components/Modal';\nimport { ModalPosition } from 'components/Modal/styles';\n\nconst DefaultStyles = createGlobalStyle`\n  * {\n    margin: 0;\n    padding: 0;\n  }\n\n  button {\n    border: none;\n  }\n  /* Temporary dark mode*/\n  body {\n    background-color: black;\n  }\n\n  :root {\n    font-size: ${theme.rootFontSize};\n  }\n\n  *, ::after, ::before {\n    box-sizing: border-box;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    color: white;\n  }\n`\n\n\nfunction App() {\n  const {editing} = useContext(EditingContext)\n  const {config} = useContext(ConfigContext)\n  const [open, setOpen] = useState(false)\n  console.log(\"Bookmarks\", config?.bookmarks);\n\n  return (\n    <>\n      <DefaultStyles/>\n      {/* {process.env.NODE_ENV === 'development' && <Debug/>} */}\n      <Debug/>\n      <Background>\n\n      </Background>\n      <Layout>\n        <Header config={config.state.header}/>\n        <Link>\n          <LinkArea>\n            {config && config.bookmarks.map(groupProps =>\n              <Group key={uuid()} {...groupProps} editing={editing}/>\n            )}\n          </LinkArea>\n        </Link>\n      </Layout>\n      {/*\n        @ZombieFox Original nighttab kept Menu off screen.\n        Conditionally rendering it will probably make NT load faster\n        Will probably require some extra transition setup, but thats okay.\n      */}\n      {open && (\n        <Modal closeMenu={() => setOpen(false)}>\n          <Menu/>\n        </Modal>\n      )}\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react'\n\ninterface Props {\n  components: Array<React.JSXElementConstructor<React.PropsWithChildren<any>>>\n  children: React.ReactNode\n}\n\nexport const Compose: React.FC<Props> = ({components = [], children}) => (\n  <>\n    {\n      components.reduceRight((acc, Comp) => (\n        <Comp>{acc}</Comp>\n      ), children)\n    }\n  </>\n)\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from 'app';\nimport { EditingProvider, ConfigProvider } from 'contexts';\nimport { Compose } from 'lib/utils';\n\n// import { library } from '@fortawesome/fontawesome-svg-core'\n// import { fab } from '@fortawesome/free-brands-svg-icons'\n// import { faPen } from '@fortawesome/free-solid-svg-icons'\n\n// TODO figure out how to include all free solids so that you can search for icons to use\n// https://fontawesome.com/how-to-use/on-the-web/using-with/react\n// library.add(fab)\n\nReactDOM.render(\n  <React.StrictMode>\n    <Compose components={[\n      ConfigProvider,\n      EditingProvider,\n    ]}>\n      <App />\n    </Compose>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals(console.log);\n","// The MIT License - Copyright (c) 2021 Samuele Zanca\n// https://github.com/metruzanca/react-hooks\n\nimport { useRef } from \"react\";\n\nexport function useConstructor(callback = () =>  {}) {\n  const firstExecution = useRef(true)\n  if(firstExecution.current){\n    firstExecution.current = false\n    callback()\n  }\n}\n"],"sourceRoot":""}